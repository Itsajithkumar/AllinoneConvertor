<!doctype html>
<html lang="en">
<head>
  <!-- ====== SEO / Basic META ====== -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Image & Document Tools — Free Online Converter | ImgVerse</title>
  <meta name="description" content="Convert images and documents instantly: extract text from images, convert PDFs, generate and scan QR codes. 100% free, private, and no account needed. Try ImgVerse now!" />
  <meta name="keywords" content="image to text, extract text, image converter, document tools, qr code, barcode, online tools, pdf converter, free ocr, jpg to pdf, pdf to jpg, online converter" />
  <link rel="canonical" href="https://www.yoursaasdomain.com/" />
  <meta name="theme-color" content="#5B6CFF" />

  <!-- Google AdSense account verification meta tag -->
  <meta name="google-adsense-account" content="ca-pub-3339591260673968">

  <!-- Performance hints -->
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- Open Graph (social shares) -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Free Image & Document Converter — ImgVerse" />
  <meta property="og:description" content="Convert images and documents instantly. Extract text, convert PDFs, generate and scan QR codes. 100% free and private." />
  <meta property="og:url" content="https://www.yoursaasdomain.com/" />
  <meta property="og:image" content="https://www.yoursaasdomain.com/og-image.jpg" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Free Image & Document Converter — ImgVerse" />
  <meta name="twitter:description" content="Convert images and documents instantly. Extract text, convert PDFs, generate and scan QR codes. 100% free and private." />
  <meta name="twitter:image" content="https://www.yoursaasdomain.com/og-image.jpg" />

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebSite",
    "name":"ImgVerse",
    "url":"https://www.yoursaasdomain.com/",
    "description":"Convert images and documents instantly: extract text from images, convert PDFs, generate and scan QR codes. 100% free, private, and no account needed."
  }
  </script>

  <link rel="icon" href="/favicon.ico" />

  <style>
    :root {
      --primary: #6c47ff;
      --primary-light: #a084ff;
      --accent: #00e6d8;
      --bg-gradient: linear-gradient(135deg, #e0e7ff 0%, #f8fafc 100%);
      --glass-bg: rgba(255,255,255,0.75);
      --glass-border: rgba(108,71,255,0.13);
      --shadow: 0 8px 32px 0 rgba(31,38,135,0.12);
      --radius: 18px;
      --radius-sm: 12px;
      --text: #1a1a2e;
      --muted: #6b7280;
      --success: #00e6a7;
      --danger: #ff4d6d;
      --transition: 0.18s cubic-bezier(.4,0,.2,1);
      --max-width: 1100px;
      --container-pad: 18px;
    }
    html, body {
      height: 100%;
      margin: 0;
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      background: var(--bg-gradient);
      color: var(--text);
      min-height: 100vh;
      scroll-behavior: smooth;
    }
    body {
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .wrap {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--container-pad);
      width: 100%;
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    header.site-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 24px 0 0 0;
      background: transparent;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .logo {
      width: 60px;
      height: 60px;
      border-radius: var(--radius);
      background: linear-gradient(135deg, var(--primary), var(--accent));
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 900;
      font-size: 26px;
      box-shadow: var(--shadow);
      letter-spacing: 2px;
      border: 2.5px solid var(--glass-border);
      transition: box-shadow var(--transition);
    }
    .logo:hover {
      box-shadow: 0 0 0 4px var(--primary-light), var(--shadow);
    }
    nav.topnav {
      display: flex;
      gap: 22px;
      align-items: center;
    }
    nav.topnav a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 700;
      font-size: 15px;
      letter-spacing: 0.5px;
      transition: color var(--transition);
    }
    nav.topnav a:hover {
      color: var(--accent);
    }
    .actions {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    .btn {
      background: var(--glass-bg);
      border: 1.5px solid var(--glass-border);
      padding: 10px 20px;
      border-radius: var(--radius-sm);
      font-weight: 700;
      cursor: pointer;
      font-size: 15px;
      color: var(--primary);
      box-shadow: 0 2px 8px rgba(108,71,255,0.07);
      transition: background var(--transition), color var(--transition), box-shadow var(--transition), border var(--transition);
      outline: none;
    }
    .btn.primary {
      background: linear-gradient(90deg, var(--primary) 60%, var(--accent) 100%);
      color: #fff;
      border: none;
      box-shadow: 0 4px 18px rgba(108,71,255,0.13);
      letter-spacing: 0.5px;
    }
    .btn:active, .btn.primary:active {
      transform: scale(0.97);
      box-shadow: 0 1px 4px rgba(108,71,255,0.09);
    }
    .btn.browse {
      background: #fff;
      color: var(--primary);
      border: 1.5px solid var(--primary-light);
    }
    .hero {
      margin: 0 auto;
      margin-top: 36px;
      text-align: center;
      padding: 36px 0 32px 0;
      max-width: 600px;
      width: 100%;
      position: relative;
    }
    .hero h1 {
      font-size: 2rem; /* Reduced from 2.5rem */
      margin: 0 0 10px 0;
      font-weight: 900;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .hero p {
      color: var(--muted);
      margin: 0 0 22px 0;
      font-size: 1.15rem;
      font-weight: 500;
    }
    .upload-area {
      background: var(--glass-bg);
      border-radius: var(--radius);
      padding: 32px 18px 24px 18px;
      border: 2.5px solid var(--glass-border);
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 18px;
      margin: 0 auto;
      width: 100%;
      max-width: 480px;
      position: relative;
      transition: box-shadow var(--transition), border var(--transition);
      backdrop-filter: blur(12px);
    }
    .upload-area:focus-within, .upload-area:hover {
      border-color: var(--primary-light);
      box-shadow: 0 8px 32px 0 rgba(108,71,255,0.13);
    }
    .upload-icon {
      width: 110px;
      height: 90px;
      object-fit: contain;
      opacity: 0.97;
      border-radius: var(--radius-sm);
      box-shadow: 0 2px 12px rgba(108,71,255,0.07);
      background: #f3f4f6;
      margin-bottom: 4px;
      transition: box-shadow var(--transition);
    }
    .upload-cta {
      display: flex;
      gap: 14px;
      align-items: center;
      justify-content: center;
      margin: 10px 0 0 0;
      width: 100%;
    }
    .tools-actions {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-top: 10px;
      flex-wrap: wrap;
      width: 100%;
      justify-content: center;
    }
    select#toolSelect {
      padding: 10px 14px;
      border-radius: var(--radius-sm);
      border: 1.5px solid var(--primary-light);
      font-weight: 700;
      font-size: 15px;
      color: var(--primary);
      background: #fff;
      transition: border var(--transition);
      outline: none;
    }
    select#toolSelect:focus {
      border-color: var(--accent);
    }
    .status {
      font-size: 14px;
      color: var(--muted);
      min-height: 18px;
      margin-top: 4px;
      letter-spacing: 0.1px;
      font-weight: 500;
    }
    .spinner {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 3px solid rgba(108,71,255,0.13);
      border-top-color: var(--primary);
      animation: spin .9s linear infinite;
      display: inline-block;
      vertical-align: middle;
      margin-left: 8px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .preview-box {
      width: 100%;
      max-width: 340px;
      border-radius: var(--radius-sm);
      padding: 14px 10px;
      background: rgba(255,255,255,0.92);
      box-shadow: 0 2px 12px rgba(108,71,255,0.07);
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      margin: 0 auto;
      border: 1.5px solid var(--glass-border);
      transition: box-shadow var(--transition), border var(--transition);
    }
    .preview-box .small {
      color: var(--muted);
      font-size: 13px;
      margin-bottom: 2px;
    }
    .result-area {
      display: flex;
      gap: 18px;
      align-items: flex-start;
      margin-top: 24px;
      width: 100%;
      flex-wrap: wrap;
      justify-content: center;
    }
    .result-box {
      flex: 1;
      min-width: 320px;
      max-width: 700px;
      padding: 18px 14px;
      border-radius: var(--radius);
      background: linear-gradient(180deg,#fff,#f8fbff);
      box-shadow: var(--shadow);
      white-space: pre-wrap;
      color: #1a1a2e;
      overflow: auto;
      max-height: 420px;
      font-size: 1.08rem;
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      transition: box-shadow var(--transition);
      border: 1.5px solid var(--glass-border);
      position: relative;
    }
    .small {
      color: var(--muted);
      font-size: 13px;
      font-weight: 500;
    }
    footer {
      margin-top: 60px;
      padding: 26px 0 18px 0;
      color: var(--muted);
      font-size: 14px;
      background: transparent;
      border-top: 1.5px solid var(--glass-border);
      text-align: center;
      width: 100%;
    }
    /* Skeleton loader for fast feel */
    .skeleton {
      background: linear-gradient(90deg, #f3f3f3 25%, #ececec 37%, #f3f3f3 63%);
      background-size: 400% 100%;
      animation: skeleton-loading 1.2s ease-in-out infinite;
      border-radius: var(--radius-sm);
      min-height: 18px;
      width: 100%;
      margin: 8px 0;
    }
    @keyframes skeleton-loading {
      0% { background-position: 100% 50%; }
      100% { background-position: 0 50%; }
    }
    /* Responsive */
    @media (max-width: 900px) {
      .hero { max-width: 98vw; }
      .upload-area { max-width: 98vw; }
      .result-box { min-width: 90vw; }
    }
    @media (max-width: 600px) {
      .hero h1 { font-size: 1.5rem; }
      .upload-area { padding: 18px 4px 14px 4px; }
      .preview-box { max-width: 98vw; }
      .result-box { min-width: 98vw; }
    }
    @media (max-width: 420px) {
      .hero { padding: 18px 0 12px 0; }
      .upload-area { padding: 10px 2px 8px 2px; }
    }
    /* Copy button style */
    #copyResultBtn {
      box-shadow: 0 2px 8px rgba(108,71,255,0.07);
      border: none;
      background: linear-gradient(90deg, var(--primary) 60%, var(--accent) 100%);
      color: #fff;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: background 0.18s cubic-bezier(.4,0,.2,1);
      position: absolute;
      top: 14px;
      right: 18px;
      z-index: 2;
      padding: 6px 18px;
      font-size: 14px;
    }
    #copyResultBtn:active {
      transform: scale(0.97);
    }
    .ads-sidebar-right {
      position: fixed;
      top: 100px;
      right: 0;
      z-index: 1000;
      width: 160px;
      max-width: 100vw;
      display: none;
    }
    @media (min-width: 1100px) {
      .ads-sidebar-right {
        display: block;
      }
    }
  </style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3339591260673968" crossorigin="anonymous"></script>
</head>
<body>
  <div class="wrap">
    <header class="site-header" role="banner">
      <div class="brand">
        <div class="logo" aria-hidden="true">IV</div>
        <div>
          <div style="font-weight:800">ImgVerse</div>
          <div class="small">Image & document tools · 100% free — No account needed</div>
        </div>
      </div>

      <nav class="topnav" role="navigation" aria-label="Main navigation">
        <a href="#tools"></a>
      </nav>

      <div class="actions">
        <button class="btn" onclick="location.reload()">Reload</button>
        <button class="btn primary" id="signupBtn" title="Select a file to upload">Upload</button>
      </div>
    </header>

    <section class="hero" role="main" aria-labelledby="hero-heading">
      <h1 id="hero-heading">Fast, private file tools — No subscription</h1>
      <p>Work with your images and documents right in your browser. Choose a tool, upload or paste a file, then press Start. Your results appear below and can be downloaded.</p>

      <div class="upload-area" aria-label="Drop, upload or paste images" id="uploadArea">
        <img src="" alt="preview" class="upload-icon" id="uploadPreview" style="display:none"/>
        <!-- Small preview panel START -->
        <div id="miniPreviewBox" style="display:none; margin-bottom:10px; text-align:center;">
          <img id="miniPreviewImg" src="" alt="file preview" style="max-width:80px; max-height:80px; border-radius:8px; display:inline-block;"/>
          <div id="miniFileInfo" class="small"></div>
        </div>
        <!-- Small preview panel END -->
        <div style="max-width:760px;text-align:center">
          <h2 style="margin:0 0 6px;font-size:18px">Drop, Upload or Paste Files</h2>
          <div class="small">Supported: Photos, screenshots, scanned documents, and more. Everything is processed privately on your device.</div>
        </div>
        <div class="upload-cta" style="width:100%;justify-content:center">
          <label class="btn browse" for="fileInput" role="button">Browse</label>
          <input id="fileInput" type="file" accept="image/*,application/pdf" style="display:none" />
          <button class="btn" id="pasteBtn" type="button">Paste</button>
          <button class="btn" id="clearBtn" type="button">Clear</button>
        </div>
        <div class="tools-actions" role="toolbar" aria-label="tools">
          <select id="toolSelect" aria-label="Select tool">
            <option value="image-to-text">image to text</option>
            <option value="pdf-to-text">pdf to text</option>
            <option value="image-to-pdf">image to pdf (Download)</option>
            <option value="pdf-to-jpg">pdf to jpg </option>
            <option value="qr-generate">QR Code generate</option>
            <option value="qr-scan">QR Code Scan</option>
          </select>
          <button class="btn primary" id="convertBtn" type="button">Start</button>
          <button class="btn" id="downloadBtn" style="display:none" type="button">Download</button>
        </div>
        <div class="status" id="uploadStatus" aria-live="polite"></div>
        <small class="small">No sign-up or subscription needed.</small>
      </div>
      <div class="result-area">
        <div id="result" class="result-box" style="display:none; position:relative"></div>
      </div>
      <!-- Feature Switcher Panel -->
      <div id="featureSwitcher" style="margin:24px 0 0 0; text-align:center; display:flex; flex-wrap:wrap; gap:10px; justify-content:center;">
        <button class="btn" data-tool="image-to-text">Image to Text</button>
        <button class="btn" data-tool="pdf-to-text">PDF to Text</button>
        <button class="btn" data-tool="image-to-pdf">Image to PDF</button>
        <button class="btn" data-tool="pdf-to-jpg">PDF to JPG</button>
        <button class="btn" data-tool="qr-generate">QR Generate</button>
        <button class="btn" data-tool="qr-scan">QR Scan</button>
      </div>
    </section>

    <footer style="margin-top:60px;padding:26px 0;color:var(--muted);font-size:13px">
      <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px">
        <div>&copy; <span id="year"></span> ImgVerse — All rights reserved</div>
        <div class="small">All tools run privately in your browser.</div>
      </div>
    </footer>
  </div>

  <!-- Libraries (deferred) -->
  <script src="https://unpkg.com/tesseract.js@4.0.2/dist/tesseract.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Elements
    const fileInput = document.getElementById('fileInput');
    const uploadPreview = document.getElementById('uploadPreview');
    const uploadStatus = document.getElementById('uploadStatus');
    const convertBtn = document.getElementById('convertBtn');
    const toolSelect = document.getElementById('toolSelect');
    const resultBox = document.getElementById('result');
    const downloadBtn = document.getElementById('downloadBtn');
    const toolCards = document.querySelectorAll('.tool-card');
    const miniPreviewBox = document.getElementById('miniPreviewBox');
    const miniPreviewImg = document.getElementById('miniPreviewImg');
    const miniFileInfo = document.getElementById('miniFileInfo');

    // pdf.js worker
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';

    function showStatus(msg, busy=false){
      uploadStatus.innerHTML = msg + (busy ? ' <span class="spinner" aria-hidden="true"></span>' : '');
    }
    function showResult(textOrNode, asHtml=false){
      resultBox.style.display = 'block';
      if(!asHtml) resultBox.textContent = textOrNode;
      else {
        resultBox.innerHTML = '';
        resultBox.appendChild(textOrNode);
      }
      resultBox.scrollIntoView({behavior:'smooth', block:'center'});
    }
    function clearResult(){ resultBox.style.display='none'; resultBox.textContent=''; downloadBtn.style.display='none'; }

    // Tool card selection
    toolCards.forEach(card=>{
      card.addEventListener('click', ()=>{
        toolCards.forEach(c=>c.classList.remove('selected'));
        card.classList.add('selected');
        const t = card.dataset.tool;
        const opt = [...toolSelect.options].find(o=>o.value===t);
        if(opt) toolSelect.value = t;
        else showStatus('Selected tool not available in the main selector. Use Convert for demos.');
      });
      card.addEventListener('dblclick', () => {
        const t = card.dataset.tool;
        const opt = [...toolSelect.options].find(o=>o.value===t);
        if(opt) { toolSelect.value = t; convertBtn.click(); }
        else { showStatus('Tool not implemented in this demo.'); }
      });
    });

    // File input change
    fileInput.addEventListener('change', (ev) => {
      clearResult();
      const f = ev.target.files && ev.target.files[0];
      if(!f) {
        miniPreviewBox.style.display = 'none';
        return;
      }
      showStatus('File selected: ' + f.name);
      uploadPreview.style.display = 'none';
      // Small preview logic
      if(f.type.startsWith('image/')) {
        const url = URL.createObjectURL(f);
        miniPreviewImg.src = url;
        miniPreviewImg.style.display = 'inline-block';
        miniFileInfo.textContent = `${f.name} — ${Math.round(f.size/1024)} KB`;
        miniPreviewBox.style.display = 'block';
      } else if(f.type === 'application/pdf') {
        miniPreviewImg.src = '/favicon.ico';
        miniPreviewImg.style.display = 'inline-block';
        miniFileInfo.textContent = `${f.name} — ${Math.round(f.size/1024)} KB`;
        miniPreviewBox.style.display = 'block';
      } else {
        miniPreviewBox.style.display = 'none';
      }
    });

    // Paste image from clipboard (cross-browser robust)
    document.getElementById('pasteBtn').addEventListener('click', async () => {
      clearResult();
      // Try Clipboard API (async, Chrome/Edge/Opera)
      if (navigator.clipboard && navigator.clipboard.read) {
        try {
          const items = await navigator.clipboard.read();
          for (const item of items) {
            for (const type of item.types) {
              if (type.startsWith('image/')) {
                const blob = await item.getType(type);
                const url = URL.createObjectURL(blob);
                uploadPreview.src = url;
                uploadPreview.style.display = 'block';
                const dt = new DataTransfer();
                dt.items.add(new File([blob], 'pasted-image.png', {type: blob.type}));
                fileInput.files = dt.files;
                uploadPreview.style.display = 'block';
                showStatus('Image pasted from clipboard.');
                return;
              }
            }
          }
          showStatus('No image found in clipboard.');
        } catch(err){
          fallbackPaste();
        }
      } else {
        fallbackPaste();
      }
    });

    // Fallback for paste (Firefox, Safari, legacy)
    function fallbackPaste() {
      showStatus('Click below and press Ctrl+V to paste image.', false);
      let pasteCatcher = document.getElementById('pasteCatcher');
      if (!pasteCatcher) {
        pasteCatcher = document.createElement('div');
        pasteCatcher.id = 'pasteCatcher';
        pasteCatcher.contentEditable = true;
        pasteCatcher.style.position = 'fixed';
        pasteCatcher.style.opacity = 0;
        pasteCatcher.style.pointerEvents = 'none';
        pasteCatcher.style.zIndex = -1;
        document.body.appendChild(pasteCatcher);
        pasteCatcher.addEventListener('paste', function(e){
          if (e.clipboardData) {
            const items = e.clipboardData.items;
            for (let i = 0; i < items.length; i++) {
              if (items[i].type.indexOf('image') !== -1) {
                const blob = items[i].getAsFile();
                const url = URL.createObjectURL(blob);
                uploadPreview.src = url;
                uploadPreview.style.display = 'block';
                const dt = new DataTransfer();
                dt.items.add(new File([blob], 'pasted-image.png', {type: blob.type}));
                fileInput.files = dt.files;
                uploadPreview.style.display = 'block';
                showStatus('Image pasted from clipboard.');
                e.preventDefault();
                return;
              }
            }
            showStatus('No image found in clipboard.');
          }
        });
      }
      pasteCatcher.focus();
    }

    document.getElementById('clearBtn').addEventListener('click', ()=> {
      fileInput.value = '';
      uploadPreview.src = '';
      uploadPreview.style.display = 'none';
      miniPreviewBox.style.display = 'none';
      clearResult();
      showStatus('Cleared.');
    });

    // helpers
    async function getFileBlob() {
      if (fileInput.files && fileInput.files[0]) return fileInput.files[0];
      if (uploadPreview.src && !uploadPreview.src.startsWith('')) {
        const r = await fetch(uploadPreview.src);
        return await r.blob();
      }
      return null;
    }

    // Convert button
    convertBtn.addEventListener('click', async () => {
      clearResult();
      const tool = toolSelect.value;
      const blob = await getFileBlob();
      if (!blob && !tool.startsWith('qr-generate')) { showStatus('Please upload or paste a file first.'); return; }

      try {
        if (tool === 'image-to-text') {
          showStatus('Running OCR...', true);
          const imgUrl = URL.createObjectURL(blob);
          Tesseract.recognize(
            imgUrl,
            'eng',
            {
              logger: m => showStatus(m.status + (m.progress ? ' ' + Math.round(m.progress*100)+'%' : ''), true)
            }
          ).then(({ data: { text } }) => {
            showStatus('OCR complete.');
            showResult(text);
            addCopyButton(text); // <-- Add this line to show the copy button
            downloadBtn.style.display='inline-block';
            downloadBtn.textContent = 'Download .txt';
            downloadBtn.onclick = () => {
              const a = document.createElement('a');
              const blobTxt = new Blob([text], {type:'text/plain'});
              a.href = URL.createObjectURL(blobTxt);
              a.download = 'ocr-result.txt';
              a.click();
            };
          }).catch(err => {
            showStatus('OCR failed: ' + (err.message || err));
          });
        }

        else if (tool === 'pdf-to-text') {
          showStatus('Extracting text from PDF...', true);
          const url = URL.createObjectURL(blob);
          const doc = await pdfjsLib.getDocument(url).promise;
          let fullText = '';
          for (let p = 1; p <= doc.numPages; p++) {
            const page = await doc.getPage(p);
            const content = await page.getTextContent();
            const strings = content.items.map(i => i.str);
            fullText += strings.join(' ') + '\n\n';
          }
          showStatus('PDF text extraction complete.');
          showResult(fullText);
          downloadBtn.style.display='inline-block';
          downloadBtn.textContent = 'Download .txt';
          downloadBtn.onclick = () => {
            const a = document.createElement('a');
            const blobTxt = new Blob([fullText], {type:'text/plain'});
            a.href = URL.createObjectURL(blobTxt);
            a.download = 'pdf-text.txt';
            a.click();
          };
        }

        else if (tool === 'image-to-pdf') {
          showStatus('Converting image to PDF...', true);
          const img = new Image();
          img.onload = () => {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF({
              orientation: img.width > img.height ? 'landscape' : 'portrait',
              unit: 'pt',
              format: [img.width, img.height]
            });
            const canvas = document.createElement('canvas');
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img,0,0);
            const dataUrl = canvas.toDataURL('image/png');
            pdf.addImage(dataUrl, 'PNG', 0, 0, img.width, img.height);
            pdf.save('image.pdf');
            showStatus('PDF downloaded.');
          };
          img.onerror = () => showStatus('Failed to load image for PDF conversion.');
          img.src = URL.createObjectURL(blob);
        }

        else if (tool === 'pdf-to-jpg') {
          showStatus('Rendering first page of PDF to image...', true);
          const url = URL.createObjectURL(blob);
          const doc = await pdfjsLib.getDocument(url).promise;
          const page = await doc.getPage(1);
          const viewport = page.getViewport({ scale: 1.5 });
          const canvas = document.createElement('canvas');
          canvas.width = viewport.width;
          canvas.height = viewport.height;
          const ctx = canvas.getContext('2d');
          await page.render({ canvasContext: ctx, viewport }).promise;
          const dataUrl = canvas.toDataURL('image/png');
          const imgNode = document.createElement('img');
          imgNode.src = dataUrl;
          imgNode.style.maxWidth = '100%';
          showResult(imgNode, true);
          downloadBtn.style.display='inline-block';
          downloadBtn.textContent = 'Download PNG';
          downloadBtn.onclick = () => {
            const a = document.createElement('a');
            a.href = dataUrl;
            a.download = 'page1.png';
            a.click();
          };
          showStatus('Rendered page 1.');
        }

        else if (tool === 'qr-generate') {
          const text = prompt('Enter text or URL to encode into QR:');
          if (!text) { showStatus('QR generation cancelled.'); return; }
          const canvas = document.createElement('canvas');
          const qr = new QRious({ element: canvas, value: text, size: 360 });
          showResult(canvas, true);
          downloadBtn.style.display='inline-block';
          downloadBtn.textContent = 'Download QR';
          downloadBtn.onclick = () => {
            const a = document.createElement('a');
            a.href = canvas.toDataURL('image/png');
            a.download = 'qrcode.png';
            a.click();
          };
          showStatus('QR generated.');
        }

        else if (tool === 'qr-scan') {
          showStatus('Scanning image for QR...', true);
          const imgBlob = blob;
          const img = new Image();
          img.onload = () => {
            const c = document.createElement('canvas');
            c.width = img.naturalWidth;
            c.height = img.naturalHeight;
            const ctx = c.getContext('2d');
            ctx.drawImage(img, 0, 0);
            try {
              const imgData = ctx.getImageData(0,0,c.width,c.height);
              const code = jsQR(imgData.data, c.width, c.height);
              if (code) {
                showResult('QR content:\n' + code.data);
                showStatus('QR detected.');
              } else {
                showResult('No QR code detected in image.');
                showStatus('No QR found.');
              }
            } catch(e){
              showStatus('Unable to access image pixels for QR scanning.');
            }
          };
          img.onerror = () => showStatus('Failed to load image for QR scan.');
          img.src = URL.createObjectURL(imgBlob);
        }

        else {
          showStatus('Selected tool is not implemented in this demo.');
        }

      } catch (err) {
        console.error(err);
        showStatus('Error: ' + (err.message || err));
      }
    });

    // Signup button focuses upload input
    document.getElementById('signupBtn').addEventListener('click', () => {
      document.getElementById('fileInput').click();
    });

    // Drag & drop
    const area = document.getElementById('uploadArea');
    area.addEventListener('dragover', (e)=>{ e.preventDefault(); area.style.borderColor = 'rgba(91,108,255,0.35)'; });
    area.addEventListener('dragleave', ()=>{ area.style.borderColor = 'rgba(91,108,255,0.06)'; });
    area.addEventListener('drop', (e)=>{
      e.preventDefault(); area.style.borderColor = 'rgba(91,108,255,0.06)';
      const f = e.dataTransfer.files && e.dataTransfer.files[0];
      if(f){
        fileInput.files = e.dataTransfer.files;
        const changeEvent = new Event('change');
        fileInput.dispatchEvent(changeEvent);
      }
    });

    // lazy loading default
    if ('loading' in HTMLImageElement.prototype) {
      document.querySelectorAll('img').forEach(img => img.loading = 'lazy');
    }

    // Add this function to create a copy button
    function addCopyButton(text) {
      // Remove existing copy button if present
      const oldBtn = document.getElementById('copyResultBtn');
      if (oldBtn) oldBtn.remove();

      const btn = document.createElement('button');
      btn.id = 'copyResultBtn';
      btn.textContent = 'Copy';
      btn.className = 'btn primary';
      btn.style.position = 'absolute';
      btn.style.top = '14px';
      btn.style.right = '18px';
      btn.style.zIndex = 2;
      btn.style.padding = '6px 18px';
      btn.style.fontSize = '14px';

      btn.onclick = async () => {
        try {
          await navigator.clipboard.writeText(text);
          btn.textContent = 'Copied!';
          setTimeout(() => { btn.textContent = 'Copy'; }, 1200);
        } catch {
          btn.textContent = 'Failed';
          setTimeout(() => { btn.textContent = 'Copy'; }, 1200);
        }
      };

      // Insert button into result box
      const resultBox = document.getElementById('result');
      resultBox.style.position = 'relative';
      resultBox.appendChild(btn);
    }

    // Feature Switcher Panel logic
    document.querySelectorAll('#featureSwitcher button').forEach(btn => {
      btn.addEventListener('click', () => {
        const tool = btn.getAttribute('data-tool');
        toolSelect.value = tool;
        showStatus('Switched to: ' + btn.textContent);
        // Optionally auto-trigger conversion:
        // convertBtn.click();
      });
    });
  </script>
  <!-- FAQ Structured Data for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Is ImgVerse free to use?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, ImgVerse is 100% free and does not require any account or subscription."
        }
      },
      {
        "@type": "Question",
        "name": "Are my files uploaded to a server?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No, all processing happens privately in your browser. Your files never leave your device."
        }
      },
      {
        "@type": "Question",
        "name": "What file types are supported?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "You can upload images (JPG, PNG, etc.) and PDF documents. QR code tools support text and images."
        }
      }
    ]
  }
  </script>
  <!-- Google AdSense Ad (Bottom Banner) -->
  <div style="margin: 32px 0 0 0; text-align: center;">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-3339591260673968"
         data-ad-slot="YYYYYYYYYYYYY"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>

  <!-- Google AdSense Ad (Right Sidebar) -->
  <div class="ads-sidebar-right">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-3339591260673968"
         data-ad-slot="YYYYYYYYYYYYY"
         data-ad-format="vertical"
         data-full-width-responsive="true"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
</body>
</html>